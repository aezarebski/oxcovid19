<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An R API to the Oxford COVID-19 Database â€¢ oxcovid19</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="An R API to the Oxford COVID-19 Database">
<meta property="og:description" content="The OxCOVID19 Project &lt;https://covid19.eng.ox.ac.uk&gt; aims to increase
    our understanding of the COVID-19 pandemic and elaborate possible strategies
    to reduce the impact on the society through the combined power of statistical,
    mathematical modelling, and machine learning techniques. The OxCOVID19
    Database is a large, single-centre, multimodal relational database consisting
    of information (using acknowledged sources) related to COVID-19 pandemic.
    This package provides an R-specific interface to the OxCOVID19 Database based
    on widely-used data handling and manipulation approaches in R.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">oxcovid19</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/oxcovid19.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/database_access.html">OxCOVID19 Database Access</a>
    </li>
    <li>
      <a href="articles/visualisation_china.html">Country level visualisation for Mainland China</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/como-ph/oxcovid19/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="oxcovid19-an-r-api-to-the-oxford-covid-19-database-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#oxcovid19-an-r-api-to-the-oxford-covid-19-database-" class="anchor"></a>oxcovid19: An R API to the Oxford COVID-19 Database <img src="reference/figures/oxcovid19.png" width="200px" align="right">
</h1></div>
<!-- badges: start -->

<p>The <a href="https://covid19.eng.ox.ac.uk">OxCOVID19 Project</a> aims to increase our understanding of the COVID-19 pandemic and elaborate possible strategies to reduce the impact on the society through the combined power of statistical, mathematical modelling, and machine learning techniques. The <a href="https://covid19.eng.ox.ac.uk">OxCOVID19 Database</a> is a large, single-centre, multimodal relational database consisting of information (using acknowledged sources) related to COVID-19 pandemic. This package provides an R-specific interface to the <a href="https://covid19.eng.ox.ac.uk">OxCOVID19 Database</a> based on widely-used data handling and manipulation approaches in R.</p>
<div id="motivation" class="section level2">
<h2 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h2>
<p>The <a href="https://covid19.eng.ox.ac.uk">OxCOVID19 Project</a> team presented to the <a href="https://www.tropicalmedicine.ox.ac.uk/news/como-consortium-the-covid-19-pandemic-modelling-in-context">CoMo Consortium</a> during its weekly meeting on the 1st of July 2020. During this meeting, the <a href="https://www.tropicalmedicine.ox.ac.uk/news/como-consortium-the-covid-19-pandemic-modelling-in-context">CoMo Consortium</a> considered the use of the OxCOVID19 Database for use in filling data and information for country-specific parameters required in the <a href="https://www.tropicalmedicine.ox.ac.uk/news/como-consortium-the-covid-19-pandemic-modelling-in-context">CoMo Consortium</a> model. Given that the <a href="https://www.tropicalmedicine.ox.ac.uk/news/como-consortium-the-covid-19-pandemic-modelling-in-context">CoMo Consortium</a> model is R-centric, it makes logical sense to build an R-specific API to connect with the <a href="https://covid19.eng.ox.ac.uk">OxCOVID19</a> <a href="https://www.postgresql.org">PostgreSQL</a> database. This package aims to facilitate the possible use of the <a href="https://covid19.eng.ox.ac.uk">OxCOVID19</a> database for this purpose through purposefully-written functions that connects an R user to the database directly from R (as opposed to doing a manual download of the data or using separate tools to access <a href="https://www.postgresql.org">PostgreSQL</a>) and processes and structures the available datasets into country-specific tables structured for the requirements of the <a href="https://www.tropicalmedicine.ox.ac.uk/news/como-consortium-the-covid-19-pandemic-modelling-in-context">CoMo Consortium</a> model. A direct link to the <a href="https://www.postgresql.org">PostgreSQL</a> via R is also advantageous as this is updated more frequently than the CSV datasets made available via GitHub.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p><code>oxcovid19</code> is not yet available on CRAN.</p>
<p>You can install the development version of <code>oxcovid19</code> from <a href="https://github.com/como-ph/oxcovid19">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="kw">if</span>(!<span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">remotes</span>)) <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"remotes"</span>)
<span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"como-ph/oxcovid19"</span>)</pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The primary use case for the <code>oxcovid19</code> package is for facilitating a simplified, R-based workflow for 1) connecting to the <a href="https://covid19.eng.ox.ac.uk">OxCOVID19</a> <a href="https://www.postgresql.org">PostgreSQL</a> server; 2) accessing table/s available from the <a href="https://www.postgresql.org">PostgreSQL</a> server; and, 3) querying the <a href="https://www.postgresql.org">PostgreSQL</a> server with specific parameters to customise table/s output for intended use.</p>
<p>The following code demonstrates this workflow:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">oxcovid19</span>)

<span class="co">## Step 1: Create a connection to OxCOVID19 PostgreSQL server</span>
<span class="no">con</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/connect_oxcovid19.html">connect_oxcovid19</a></span>()

<span class="co">## Step 2: Access epidemiology table from OxCOVID19 PostgreSQL server</span>
<span class="no">epi_tab</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/get_table.html">get_table</a></span>(<span class="kw">con</span> <span class="kw">=</span> <span class="no">con</span>, <span class="kw">tbl_name</span> <span class="kw">=</span> <span class="st">"epidemiology"</span>)

<span class="co">## Step 3: Query the epidemiology table to show data for Great Britain</span>
<span class="no">gbr_epi_tab</span> <span class="kw">&lt;-</span> <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">.data</span> <span class="kw">=</span> <span class="no">epi_tab</span>, <span class="no">countrycode</span> <span class="kw">==</span> <span class="st">"GBR"</span>)</pre></div>
<p><strong>Step 1</strong> and <strong>Step 2</strong> above are facilitated by the <code>connect_oxcovid19</code> and the <code>get_table</code> functions provided by the <code>oxcovid19</code> package. These functions are basically low-level wrappers to functions in the <a href="https://db.rstudio.com/dbi/"><code>DBI</code></a> and <a href="https://rpostgres.r-dbi.org"><code>RPostgres</code></a> packages applied specifically to work with the <a href="https://covid19.eng.ox.ac.uk">OxCOVID19</a> <a href="https://www.postgresql.org">PostgreSQL</a>. These functions facilitate convenient access to the server for general R users without having to learn to use the <code>DBI</code> and <code>RPostgres</code> packages.</p>
<p><strong>Step 3</strong>, on the other hand, is facilitated by the <code>dplyr</code> package functions which were designed to work with different types of tables including those from various database server connections such as <a href="https://www.postgresql.org">PostgreSQL</a>.</p>
<p>The output of the workflow shown above is:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co">#&gt; # Source:   lazy query [?? x 15]</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">#&gt; # Database: postgres [covid19@covid19db.org:5432/covid19]</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt;    source date       country countrycode adm_area_1 adm_area_2 adm_area_3 tested</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">#&gt;    &lt;chr&gt;  &lt;date&gt;     &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;       &lt;int&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt;  1 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    East Ridiâ€¦ &lt;NA&gt;           NA</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">#&gt;  2 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    East Sussâ€¦ &lt;NA&gt;           NA</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt;  3 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Greenwich  &lt;NA&gt;           NA</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt;  4 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Haringey   &lt;NA&gt;           NA</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt;  5 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Havering   &lt;NA&gt;           NA</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt;  6 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Hillingdon &lt;NA&gt;           NA</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt;  7 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Kensingtoâ€¦ &lt;NA&gt;           NA</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#&gt;  8 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Leicester  &lt;NA&gt;           NA</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#&gt;  9 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Hackney    &lt;NA&gt;           NA</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">#&gt; 10 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Merton     &lt;NA&gt;           NA</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co">#&gt; # â€¦ with more rows, and 7 more variables: confirmed &lt;int&gt;, recovered &lt;int&gt;,</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">#&gt; #   dead &lt;int&gt;, hospitalised &lt;int&gt;, hospitalised_icu &lt;int&gt;, quarantined &lt;int&gt;,</span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="co">#&gt; #   gid &lt;chr&gt;</span></span></code></pre></div>
<p>The <code>oxcovid19</code> package functions are also designed to allow <em>pipe operations</em> using the <code>magrittr</code> package. The workflow above can be done using piped operations as follows:</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="co">## Load magrittr to use pipe operator %&gt;%</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">magrittr</span>)

<span class="fu"><a href="reference/connect_oxcovid19.html">connect_oxcovid19</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/get_table.html">get_table</a></span>(<span class="kw">tbl_name</span> <span class="kw">=</span> <span class="st">"epidemiology"</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">countrycode</span> <span class="kw">==</span> <span class="st">"GBR"</span>)
<span class="co">#&gt; # Source:   lazy query [?? x 15]</span>
<span class="co">#&gt; # Database: postgres [covid19@covid19db.org:5432/covid19]</span>
<span class="co">#&gt;    source date       country countrycode adm_area_1 adm_area_2 adm_area_3 tested</span>
<span class="co">#&gt;    &lt;chr&gt;  &lt;date&gt;     &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;       &lt;int&gt;</span>
<span class="co">#&gt;  1 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    East Ridiâ€¦ &lt;NA&gt;           NA</span>
<span class="co">#&gt;  2 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    East Sussâ€¦ &lt;NA&gt;           NA</span>
<span class="co">#&gt;  3 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Greenwich  &lt;NA&gt;           NA</span>
<span class="co">#&gt;  4 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Haringey   &lt;NA&gt;           NA</span>
<span class="co">#&gt;  5 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Havering   &lt;NA&gt;           NA</span>
<span class="co">#&gt;  6 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Hillingdon &lt;NA&gt;           NA</span>
<span class="co">#&gt;  7 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Kensingtoâ€¦ &lt;NA&gt;           NA</span>
<span class="co">#&gt;  8 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Leicester  &lt;NA&gt;           NA</span>
<span class="co">#&gt;  9 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Hackney    &lt;NA&gt;           NA</span>
<span class="co">#&gt; 10 GBR_Pâ€¦ 2020-03-13 Unitedâ€¦ GBR         England    Merton     &lt;NA&gt;           NA</span>
<span class="co">#&gt; # â€¦ with more rows, and 7 more variables: confirmed &lt;int&gt;, recovered &lt;int&gt;,</span>
<span class="co">#&gt; #   dead &lt;int&gt;, hospitalised &lt;int&gt;, hospitalised_icu &lt;int&gt;, quarantined &lt;int&gt;,</span>
<span class="co">#&gt; #   gid &lt;chr&gt;</span></pre></div>
<p>The workflow using the piped workflow outputs the same result as the earlier workflow but with a much streamlined use of code.</p>
</div>
<div id="limitations" class="section level2">
<h2 class="hasAnchor">
<a href="#limitations" class="anchor"></a>Limitations</h2>
<p>The <code>oxcovid19</code> package is in active development which will be dictated by the evolution of the <a href="http://covid19.eng.ox.ac.uk/">OxCOVID19 Database</a> over time. Whilst every attempt will be employed to maintain syntax of current functions, it is possible that current functions may change syntax or operability in order to ensure relevance or maybe deprecated in lieu of a more appropriate and/or more performant function. In either of these cases, any change will be well-documented and explained to users and deprecation will be staged in such a way that users will be informed in good time to allow for transition to using the new functions.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/como-ph/oxcovid19/">https://â€‹github.com/â€‹como-ph/â€‹oxcovid19/â€‹</a>
</li>
<li>Report a bug at <br><a href="https://github.com/como-ph/oxcovid19/issues">https://â€‹github.com/â€‹como-ph/â€‹oxcovid19/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Ernest Guevarra <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-4887-4415" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://github.com/como-ph/oxcovid19/actions"><img src="https://github.com/como-ph/oxcovid19/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://ci.appveyor.com/project/como-ph/oxcovid19"><img src="https://ci.appveyor.com/api/projects/status/github/como-ph/oxcovid19?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://github.com/como-ph/oxcovid19/actions"><img src="https://github.com/como-ph/oxcovid19/workflows/test-coverage/badge.svg" alt="R build status"></a></li>
<li><a href="https://codecov.io/gh/como-ph/oxcovid19?branch=master"><img src="https://codecov.io/gh/como-ph/oxcovid19/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://www.codefactor.io/repository/github/como-ph/oxcovid19"><img src="https://www.codefactor.io/repository/github/como-ph/oxcovid19/badge" alt="CodeFactor"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Ernest Guevarra.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
